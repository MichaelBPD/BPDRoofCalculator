<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Gutter Quote Calculator</title>
  <style>
    :root{
      --brand:#ec008c;
      --bg:#ffe100;
      --card:#fff;
      --text:#222;
      --muted:#666;
    }
    *{box-sizing:border-box}
    body{font-family:Arial,Helvetica,sans-serif;margin:0;background:var(--bg);color:var(--text)}
    header{padding:22px 16px;text-align:center}
    h1{margin:0 0 6px;color:var(--brand)}
    p{margin:0;color:var(--muted)}
    .wrap{max-width:980px;margin:16px auto;padding:16px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1.1fr .9fr}}
    .card{background:var(--card);border-radius:18px;box-shadow:0 2px 10px rgba(0,0,0,.12);padding:16px}
    fieldset{border:1px solid #eee;border-radius:12px;padding:12px;margin:0 0 12px}
    legend{padding:0 8px;color:#555}
    label{display:block;font-weight:700;margin:10px 0 6px}
    input[type="number"], select{
      width:100%;padding:10px;border:1px solid #ccc;border-radius:10px;font-size:15px
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .inline{display:flex;align-items:center;gap:10px;margin-top:8px}
    .muted{font-size:12px;color:var(--muted)}
    .cta{
      width:100%;border:0;border-radius:12px;padding:12px 14px;
      background:#007bff;color:#fff;font-size:16px;font-weight:700;cursor:pointer
    }
    .cta:hover{background:#0056b3}
    .summary h2{margin:0 0 6px;color:var(--brand);text-align:center}
    .pill{display:inline-block;background:#f4f4f4;border-radius:999px;padding:7px 12px;margin:6px 6px}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    .right{text-align:right}
  </style>
</head>
<body>

<header>
  <h1>Quote Calculator</h1>
  <p>All prices include labour, materials and markups unless specified otherwise</p>
</header>

<div class="wrap">
  <div class="grid">
    <!-- LEFT -->
    <div class="card">
      <fieldset>
        <legend>Job basics</legend>
        <div class="row">
          <div>
            <label for="storeys">Storey</label>
            <select id="storeys">
              <option value="single" selected>Single story</option>
              <option value="double">Double story</option>
            </select>
          </div>
          <div>
            <label for="twoDay">Job length</label>
            <select id="twoDay">
              <option value="no" selected>Standard</option>
              <option value="yes">2 Day likely job</option>
            </select>
            <div class="muted">Affects boom lift day charge only.</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="accessAllowance">Difficult access allowance ($)</label>
            <input type="number" id="accessAllowance" min="0" step="1" value="0" />
            <div class="muted">Enter $0 if access is normal.</div>
          </div>
          <div>
            <label class="inline" for="excludeGST" style="margin:10px 0 6px">
              <input type="checkbox" id="excludeGST" />
              Exclude GST (show ex GST)
            </label>
            <div class="muted">All values will be divided by 1.1.</div>
          </div>
        </div>

        <div class="inline">
          <input type="checkbox" id="tileRoof" />
          <label for="tileRoof" style="margin:0;font-weight:700">Tile roof (x1.25 on gutters + downpipes)</label>
        </div>
      </fieldset>

      <fieldset>
        <legend>Gutters</legend>
        <div class="row">
          <div>
            <label for="lengthM">Gutter length (metres)</label>
            <input type="number" id="lengthM" min="0" step="0.1" value="0" />
            <div class="muted">$300/m single · $350/m double</div>
          </div>
          <div>
            <label for="corners">Corners (qty)</label>
            <input type="number" id="corners" min="0" step="1" value="0" />
            <div class="muted">$250 each</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="rakes">Rakes (qty)</label>
            <input type="number" id="rakes" min="0" step="1" value="0" />
            <div class="muted">$350 each</div>
          </div>
          <div>
            <label for="guardsLengthM">Gutter guard length (metres)</label>
            <input type="number" id="guardsLengthM" min="0" step="0.1" value="0" />
            <div class="muted">$1,250 per 10m single · $1,500 per 10m double</div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Downpipes</legend>
        <div class="row">
          <div>
            <label for="downpipeType">Downpipe type</label>
            <select id="downpipeType">
              <option value="pvc" selected>PVC</option>
              <option value="metal">Metal</option>
            </select>
          </div>
          <div>
            <label for="downpipes">Downpipes (qty)</label>
            <input type="number" id="downpipes" min="0" step="1" value="0" />
          </div>
        </div>
        <div class="muted">
          PVC: $450 single / $650 double · Metal: $650 single / $850 double
        </div>
      </fieldset>

      <fieldset>
        <legend>Access equipment</legend>

        <div class="inline">
          <input type="checkbox" id="scaffolding" />
          <label for="scaffolding" style="margin:0;font-weight:700">Scaffolding</label>
        </div>
        <div class="muted">Defaults to $4,000</div>

        <div class="inline" style="margin-left:20px">
          <input type="checkbox" id="difficultScaffolding" />
          <label for="difficultScaffolding" style="margin:0;font-weight:700">Difficult scaffolding (x1.5)</label>
        </div>
        <div class="muted" style="margin-left:20px">Only applies if scaffolding is ticked.</div>

        <hr style="border:0;border-top:1px solid #eee;margin:12px 0">

        <div class="inline">
          <input type="checkbox" id="boom" />
          <label for="boom" style="margin:0;font-weight:700">Boom lift</label>
        </div>
        <div class="muted">
          Travel $1,200 + $300/day (days affected by “2 Day likely job”)
        </div>
      </fieldset>

      <button class="cta" id="calcBtn" type="button">Calculate</button>
      <div class="muted" style="margin-top:10px">
        Tip: change values and it will auto-recalculate.
      </div>
    </div>

    <!-- RIGHT -->
    <div class="card summary">
      <h2>Estimate</h2>
      <div id="topPills" style="text-align:center"></div>
      <table id="breakdown" aria-label="Breakdown"></table>
    </div>
  </div>
</div>

<script>
const PRICING = {
  guttersPerM: { single: 300, double: 350 },
  cornerEach: 250,
  rakeEach: 350,
  guardPer10M: { single: 1250, double: 1500 },
  downpipeEach: {
    pvc:   { single: 450, double: 650 },
    metal: { single: 650, double: 850 }
  },
  scaffoldingDefault: 4000,
  difficultScaffoldingMultiplier: 1.5,
  boomTravel: 1200,
  boomPerDay: 300,
  tileMultiplier: 1.25,
  gstDivisor: 1.1
};

function money(n){
  return Number(n||0).toLocaleString("en-AU",{style:"currency",currency:"AUD"});
}

function calc(){
  const storeys = document.getElementById("storeys").value;
  const twoDay = document.getElementById("twoDay").value === "yes";

  const tileRoof = document.getElementById("tileRoof").checked;
  const excludeGST = document.getElementById("excludeGST").checked;
  const gstFactor = excludeGST ? (1 / PRICING.gstDivisor) : 1; // divide by 1.1 when excluding GST

  const accessAllowanceInc = Math.max(0, +document.getElementById("accessAllowance").value || 0);

  const lengthM = Math.max(0, +document.getElementById("lengthM").value || 0);
  const corners = Math.max(0, +document.getElementById("corners").value || 0);
  const rakes = Math.max(0, +document.getElementById("rakes").value || 0);

  const guardsLengthM = Math.max(0, +document.getElementById("guardsLengthM").value || 0);

  const downpipeType = document.getElementById("downpipeType").value;
  const downpipes = Math.max(0, +document.getElementById("downpipes").value || 0);

  const scaffolding = document.getElementById("scaffolding").checked;
  const difficultScaffolding = document.getElementById("difficultScaffolding").checked;

  const boom = document.getElementById("boom").checked;

  const lines = [];
  const add = (label, qty, costIncGST) => {
    const cost = costIncGST * gstFactor;
    if(cost > 0) lines.push({label, qty, cost});
  };

  const tileNote = tileRoof ? ` (tile x${PRICING.tileMultiplier})` : "";

  // Gutters (tile multiplier applies)
  const guttersBase = lengthM * PRICING.guttersPerM[storeys];
  const guttersCostInc = tileRoof ? guttersBase * PRICING.tileMultiplier : guttersBase;
  add(
    "Gutters",
    `${lengthM.toFixed(1)} m @ ${money(PRICING.guttersPerM[storeys])}/m${tileNote}`,
    guttersCostInc
  );

  // Corners / Rakes (no tile multiplier)
  add("Corners", `${corners} @ ${money(PRICING.cornerEach)}`, corners * PRICING.cornerEach);
  add("Rakes", `${rakes} @ ${money(PRICING.rakeEach)}`, rakes * PRICING.rakeEach);

  // Guards (no tile multiplier; per 10m blocks)
  const guardBlocks = Math.ceil(guardsLengthM / 10);
  add(
    "Gutter guard",
    `${guardsLengthM.toFixed(1)} m (x${guardBlocks} blocks of 10m)`,
    guardBlocks * PRICING.guardPer10M[storeys]
  );

  // Downpipes (tile multiplier applies)
  const dpRate = PRICING.downpipeEach[downpipeType][storeys];
  const dpBase = downpipes * dpRate;
  const dpCostInc = tileRoof ? dpBase * PRICING.tileMultiplier : dpBase;
  add(
    `Downpipes (${downpipeType.toUpperCase()})`,
    `${downpipes} @ ${money(dpRate)}${tileNote}`,
    dpCostInc
  );

  // Access allowance (custom)
  add("Difficult access allowance", "Custom", accessAllowanceInc);

  // Scaffolding
  if(scaffolding){
    let scaf = PRICING.scaffoldingDefault;
    if(difficultScaffolding) scaf *= PRICING.difficultScaffoldingMultiplier;
    add("Scaffolding", difficultScaffolding ? `1 (difficult x${PRICING.difficultScaffoldingMultiplier})` : "1", scaf);
  }

  // Boom lift
  if(boom){
    const days = twoDay ? 2 : 1;
    const boomCost = PRICING.boomTravel + (PRICING.boomPerDay * days);
    add("Boom lift", `Travel ${money(PRICING.boomTravel)} + ${days} day(s) @ ${money(PRICING.boomPerDay)}/day`, boomCost);
  }

  const total = lines.reduce((s,l)=>s + l.cost, 0);

  document.getElementById("topPills").innerHTML = `
    <div class="pill">Total (${excludeGST ? "ex GST" : "inc GST"}): <strong>${money(total)}</strong></div>
    <div class="pill">Storey: <strong>${storeys === "single" ? "Single" : "Double"}</strong></div>
    <div class="pill">Tile roof: <strong>${tileRoof ? "Yes" : "No"}</strong></div>
    <div class="pill">2 Day likely: <strong>${twoDay ? "Yes" : "No"}</strong></div>
  `;

  const tbl = document.getElementById("breakdown");
  tbl.innerHTML = `
    <thead>
      <tr><th>Item</th><th>Qty / Notes</th><th class="right">Price (${excludeGST ? "ex" : "inc"} GST)</th></tr>
    </thead>
  `;
  const tb = document.createElement("tbody");

  lines.forEach(l=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${l.label}</td><td>${l.qty}</td><td class="right">${money(l.cost)}</td>`;
    tb.appendChild(tr);
  });

  const trTot = document.createElement("tr");
  trTot.innerHTML = `<td><strong>Total</strong></td><td></td><td class="right"><strong>${money(total)}</strong></td>`;
  tb.appendChild(trTot);
  tbl.appendChild(tb);

  // UX: disable difficult scaffolding if scaffolding not checked
  const ds = document.getElementById("difficultScaffolding");
  ds.disabled = !scaffolding;
  if(!scaffolding) ds.checked = false;
}

function onReady(){
  document.getElementById("calcBtn").addEventListener("click", calc);
  document.querySelectorAll("input,select").forEach(el=>{
    el.addEventListener("input", calc);
    el.addEventListener("change", calc);
  });
  calc();
}
if(document.readyState === "loading") document.addEventListener("DOMContentLoaded", onReady);
else onReady();
</script>

</body>
</html>
